(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2967e60"],{"0117":function(e,t,n){"use strict";var o=n("3c80"),s=n.n(o);s.a},"3c80":function(e,t,n){},bc23:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"box_content"}},[o("div",{staticClass:"main_box bg_white"},[o("div",{staticClass:"binding"},[o("p",{staticClass:"pt_64 text_333 f_44"},[e._v(e._s(e.title))]),o("div",{staticClass:"sendPhone bt-b",on:{click:function(t){return t.stopPropagation(),e.showNumkeybord(t)}}},[o("p",{directives:[{name:"show",rawName:"v-show",value:e.phoneTitle,expression:"phoneTitle"}],staticClass:"text_999 f_24"},[e._v("手机号")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.phoneTitle,expression:"phoneTitle"}],staticClass:"close",on:{click:e.clearInput}},[o("img",{attrs:{src:n("f1e9"),alt:""}})]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.pagephone,expression:"pagephone"}],attrs:{type:"text",readonly:"",placeholder:"请输入手机号"},domProps:{value:e.pagephone},on:{input:function(t){t.target.composing||(e.pagephone=t.target.value)}}})]),o("div",{staticClass:"getcode clearfix"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedActive,expression:"checkedActive"}],staticClass:"codeInfo"},[o("p",{staticClass:"warning_text"},[e._v("验证码")]),o("div",{staticClass:"code_box",on:{click:function(t){e.show=!0}}},e._l(e.codemax,function(t,n){return o("span",{key:n,class:{active:e.code.length-1>=n}},[e._v(e._s(e.code[n]))])}),0)]),o("button",{class:[{active:e.checkedActive}],attrs:{disabled:e.allowButton},on:{click:e.sendcode}},[e.isresend?[e._v("\n                        "+e._s(e.resendTime)+"秒后重发\n                    ")]:[e._v("\n                        获取验证码\n                    ")]],2)]),["changebind"==e.type?o("button",{class:["submit_btn",{submit_btn_acitive:e.checkedCodelength}],on:{click:e.changePhone}},[e._v("确定")]):e._e(),"bind"==e.type?o("button",{class:["submit_btn",{submit_btn_acitive:e.checkedCodelength}],on:{click:e.bindPhone}},[e._v("确定")]):e._e()]],2)]),o("van-number-keyboard",{staticStyle:{"z-index":"2000",right:"0px",position:"absolute"},attrs:{show:e.show,theme:"custom","close-button-text":"完成"},on:{blur:function(t){e.show=!1},input:e.onInput,delete:e.onDelete}}),o("van-number-keyboard",{staticStyle:{"z-index":"2000",right:"0px",position:"absolute"},attrs:{show:e.phoneshow,theme:"custom","close-button-text":"完成"},on:{blur:function(t){e.phoneshow=!1},input:e.onInputPhone,delete:e.onDeletePhone}})],1)},s=[],i=n("f729"),h={mixins:[i["a"]],data:function(){return{pagephone:"",phonecode:[],phoneshow:!1,phoneMax:11,allowButton:!1,phoneTitle:!1,show:!1,code:[],codemax:6,isresend:!1,resendTime:60,timer:null,title:"绑定手机号",type:"bind"}},created:function(){this.title=this.$route.params.title?this.$route.params.title:this.title,this.type=this.$route.params.type,"bind"==this.type&&this.$store.state.phone&&this.$router.push({name:"home"})},computed:{checkedActive:function(){var e=!1;return this.phoneTitle=!!this.pagephone.length,/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.pagephone)?(e=!0,this.allowButton=!1,this.phoneshow=!1):(this.allowButton=!0,this.isresend=!1,this.timer&&clearTimeout(this.timer)),e},checkedCodelength:function(){var e=!1;return this.code.length==this.codemax&&(e=!0),e}},methods:{showNumkeybord:function(){this.phoneshow=!0},clearInput:function(){this.pagephone="",this.phonecode=[]},bindPhone:function(){var e=this,t=this;if(this.openId){var n=this.code.join("");this.$store.dispatch("bindPhone",{phone:this.pagephone,openId:this.openId,verificationCode:n}).then(function(n){n&&(t.$store.state.phone=e.pagephone,t.$Tools.sendMessage("恭喜您,手机号绑定成功！"),t.$router.push({name:"home"}))})}else this.$Tools.sendMessage("openId获取失败!")},changePhone:function(){var e=this;if(this.openId){var t=this.code.join("");this.$store.dispatch("updataPhone",{phone:this.pagephone,openId:this.openId,verificationCode:t}).then(function(t){t&&(e.$store.state.phone=t.data.phone,e.$Tools.sendMessage("恭喜您,手机号更换成功！"),e.$router.push({name:"home"}))})}else this.$Tools.sendMessage("openId获取失败!")},sendcode:function(){var e=this;if(e.allowButton)e.$Tools.sendMessage("手机号格式不对，请您重新填写");else if(!e.isresend){if(e.isresend=!0,e.resendTime=60,!e.openId)return void e.$Tools.sendMessage("openId获取失败!");e.$store.dispatch("sendCode",{phone:e.pagephone,openId:e.openId}),e.timer=setInterval(function(){if(0===e.resendTime)return clearTimeout(e.timer),void(e.isresend=!1);e.resendTime=e.resendTime-1},1e3)}},onInput:function(e){this.code.length+1>this.codemax?this.$Tools.sendMessage("验证码最多为".concat(this.codemax,"位！")):this.code.push(e)},onDelete:function(){this.code.splice(this.code.length-1,1)},onInputPhone:function(e){this.phonecode.length+1>this.phoneMax?this.$Tools.sendMessage("手机号最多为".concat(this.phoneMax,"位！")):(this.phonecode.push(e),this.pagephone=this.phonecode.join(""))},onDeletePhone:function(){this.phonecode.splice(this.phonecode.length-1,1),this.pagephone=this.phonecode.join("")}}},a=h,c=(n("0117"),n("2877")),d=Object(c["a"])(a,o,s,!1,null,null,null);t["default"]=d.exports},f1e9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAgRJREFUaAXtmL1OAkEUhUX+EXwfeCItxAQLKKChgAZJsPAFbCwsNNFEE0000WfSDr9bYE42wd0BloXk3uSEOzP3j5PdmTt7cODiDDgDzoAz4Aw4A86AM5CYgfl83gAnoJnYKcaQWC1wChoxpusvk2QKFnK2bkQCtRfB+J2GxjsMdcD+R3yuSNqRcZCK7wUOM3H6Fj0dlaTH4AuodEOz4dzTAOifIP1HyAolUR18AJV+0j+B00Ad0d/BUVL/jdiRsAbegMowLjjGQ3VAfwW1OL9U1klcBS9AZbwsGUZjNUR/BpVl9luZp4AyeAIqk2hyFidqgP4IylG7TMYUUgIPQOVvd2Fypgvo96CUSbHLklJQEdwBlWsGBhWzKS6Lk+k8hRXArVYb0W2tkGmRcckpMA9uIoXb0Obycf6h66ucxKE59scehvf3EaL4/X2JKd62UdsaVf7bRm3L3Y1tlELsILNDSSXJQWaHX7YHGQVUgLUDKiGthLUh1UzechJbM2eNmMoqzZw1hNtt5kho7bS1wCqDpEzi1FdHdGvN60n917Ijkd2J7fKh0gsNinNXA6DbJSn9Cw1JRpHEdi1cSYjTicQahQZa5STW/v08l8tdhiZd2ONrl/j2YsyvxpbpDaowZo+QfQJpbSossZrAPtWk/whtqmiP4ww4A86AM+AMOAPOwA4w8Au6ykuhMF8uVgAAAABJRU5ErkJggg=="},f729:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={data:function(){return{openId:null,phone:null}},created:function(){this.$store.state.openId?this.openId=this.$store.state.openId:this.$Tools.sendMessage("获取openid失败！")}}}}]);